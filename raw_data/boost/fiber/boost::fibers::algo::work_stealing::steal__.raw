push rbx
mov rbx, rdi
add rdi, 0x18
call _ZN5boost6fibers6detail13spinlock_ttas4lockEv
mov rax, qword [rbx + 0x28]
cmp rax, qword [rbx + 0x20]
je 0x80016f8
mov rdx, qword [rbx + 0x38]
mov r8, qword [rdx + rax*8]
test byte [r8 + 0xe0], 6
jne 0x80016f8
add rax, 1
xor edx, edx
div qword [rbx + 0x30]
mov qword [rbx + 0x28], rdx
mov rax, r8
mov dword [rbx + 0x18], 1
pop rbx
ret
nop dword [rax + rax]
xor r8d, r8d
jmp 0x80016e7
