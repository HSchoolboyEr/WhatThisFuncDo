push r12
push rbp
push rbx
mov eax, dword [rdi]
cmp eax, 2
je 0x80000c5
mov rbp, rdi
lea rbx, [0x08000065]
nop dword [rax]
mov rdi, rbx
call pthread_mutex_lock
cmp eax, 4
je 0x8000068
mov eax, dword [rbp]
lea rbx, [0x0800007f]
cmp eax, 2
je 0x80000b8
xor eax, eax
mov edx, 1
lock cmpxchg dword [rbp], edx
jne 0x80000d0
mov r12d, 1
lea rbx, [0x0800009f]
nop
mov rdi, rbx
call pthread_mutex_unlock
cmp eax, 4
je 0x80000a0
mov eax, r12d
pop rbx
pop rbp
pop r12
ret
nop dword [rax]
mov rdi, rbx
call pthread_mutex_unlock
cmp eax, 4
je 0x80000b8
xor r12d, r12d
pop rbx
pop rbp
mov eax, r12d
pop r12
ret
lea rbx, [0x080000d7]
cmp eax, 2
je 0x8000100
mov rsi, rbx
lea rdi, [0x080000e6]
call pthread_cond_wait
cmp eax, 4
je 0x80000dc
xor eax, eax
mov edx, 1
lock cmpxchg dword [rbp], edx
je 0x8000092
jmp 0x80000d7
xor r12d, r12d
jmp 0x8000098
