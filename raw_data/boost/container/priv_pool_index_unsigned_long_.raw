cmp rdi, 0x10
mov eax, 0x10
cmovb rdi, rax
lea rax, [rdi - 1]
bsr rdx, rdi
and rdi, rax
xor rdx, 0x3f
mov eax, 0x3b
cmp rdi, 1
movsxd rdx, edx
sbb rax, 0xffffffffffffffff
sub rax, rdx
ret
