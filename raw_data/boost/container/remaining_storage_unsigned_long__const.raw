mov rax, qword [rdi + 0x18]
lea rdx, [rax + rsi - 1]
neg rsi
and rsi, rdx
mov rdx, qword [rdi + 0x20]
mov rcx, rsi
sub rcx, rax
add rax, rdx
sub rax, rsi
cmp rcx, rdx
mov edx, 0
cmovae rax, rdx
ret
